# exampleOfVtable

## Explanation
Мы сравниваем не первые функции, мы сравниваем адреса виртуальных таблиц (vtable).
```
В виртуальной таблице есть адрес на функцию, обозначим как void* (т.к. не знаем её типа), получается виртуальная таблица -- массив void*, т.е. тип виртуальной таблицы можно обозначить как void**.
В начале класса хранится указатель на виртуальную таблицу, т.е. тип этой "переменной" -- void***.
Expression *left; это указатель на начало класса, т.е. в принципе это -- указатель на указатель на виртуальную таблицу (void***).
Следовательно для сравнения адресов двух функций необходимо получить доступ до массива void* c функциями (тип void**):
*(void***)left;
Далее обращаемся как с массивом, и сравниваем вторые функции (индекс 1):
*(void***)left[1] == *(void***)right[1];
```

Спасбо за разъяснение пользователю Richard Dzenis (https://stepik.org/users/769435) и платформе Stepik

## And one more time

1. Целочисленный тип

Указатель на класс Expression указывает на первое поле этого класса. То есть он хранит
адрес этого поля. А первое поле - это, скорее всего, указатель на таблицу виртуальных функций.

Указатель на первое поле класса Expresiion после (int const *)
стал указателем на константное целочисленное значение, причём хранимый им адрес не изменился.

Узнавая это значение(разыменовывая указатель на Expresion),
мы по сути попадаем в ячейку, в которой хранится значение указателя на виртуальную таблицу,
которое является целочисленным типом, так как адреса - это целые числа, а указатели хранят адреса.

То есть, по сути, мы узнаём адрес таблицы, которая для одинаковых классов одинакова и имеет один и тот же адрес.
2. Указатель на указатель

Так как(с большой вероятностью) первое поле у объекта класса Expression и его наследников- это указатель на таблицу виртуальных функций, то, так как указатель на объект класса Expression указывает на его первое поле, можно предположить, что он указывает на указатель,
который будет хранить одинаковые адреса таблиц виртуальных функций для одинаковых классов.
Поэтому сравнив эти адреса, мы сравним указатели на таблицы виртуальных функций. Можно было сделать и так

(c) Виталий Коряко https://stepik.org/users/26612395
